name: "Code Review Action with Multiple providers in Gitea"
description: "An action that reviews PR changes using multiple AI LLMs."
author: "Myeongseon Choi"

inputs:
  access-token:
    required: true
    description: "Gitea or GitHub token"
  full-context-model:
    required: true
    default: "gpt-4o"
    description: "Model for the full context pass"
  full-context-api-key:
    required: true
    description: "API key for the full context model"
  single-chunk-model:
    required: true
    default: "gpt-4o"
    description: "Model for the file-chunk pass"
  single-chunk-api-key:
    required: true
    description: "API key for the single chunk model"
  exclude-files:
    required: false
    default: "*.yml,*.yaml"
    description: "Patterns to exclude in diffs"


runs:
  using: "docker"
  image: "ghcr.io/myeongseon/gitea-ai-reviewer:v0.6"
  env:
    GITHUB_EVENT_DATA: ${{ github.event }}
    ACCESS_TOKEN: ${{ inputs.access-token }}
    FULL_CONTEXT_MODEL: ${{ inputs.full-context-model }}
    FULL_CONTEXT_API_KEY: ${{ inputs.full-context-api-key }}
    SINGLE_CHUNK_MODEL: ${{ inputs.single-chunk-model }}
    SINGLE_CHUNK_API_KEY: ${{ inputs.single-chunk-api-key }}
    EXCLUDE: ${{ inputs.exclude-files }}

branding:
  icon: "align-left"
  color: "orange"
